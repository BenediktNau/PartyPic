(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>l,options:()=>u,setup:()=>d,teardown:()=>p});const n=require("k6/http");var r=e.n(n);const o=require("k6"),a=new(require("k6/metrics").Rate)("errors"),s=__ENV.BASE_URL||"http://app.100.50.133.182.nip.io",i=__ENV.API_URL||"http://api.100.50.133.182.nip.io",u={scenarios:{spike_test:{executor:"ramping-vus",startVUs:0,stages:[{duration:"10s",target:50},{duration:"20s",target:200},{duration:"2m",target:200},{duration:"1m",target:300},{duration:"2m",target:300},{duration:"30s",target:0}]}},thresholds:{http_req_duration:["p(95)<5000"],errors:["rate<0.3"]}};function l(){r().batch([["GET",s,null,{tags:{name:"Frontend"}}],["GET",`${i}/`,null,{tags:{name:"API-Health"}}],["GET",`${i}/metrics`,null,{tags:{name:"API-Metrics"}}]]).forEach(e=>{a.add(e.status>=400)}),(0,o.sleep)(.1);const e=JSON.stringify({username:"stresstest",password:"stresstest123"});r().post(`${i}/auth/login`,e,{headers:{"Content-Type":"application/json"},tags:{name:"Login"}}),(0,o.sleep)(.1)}function d(){console.log("\n╔═══════════════════════════════════════════════════════════╗\n║          PartyPic STRESS TEST - Quick HPA Trigger         ║\n╠═══════════════════════════════════════════════════════════╣\n║  ⚠️  This test uses HIGH LOAD to force rapid scaling!      ║\n║                                                           ║\n║  Watch these commands in another terminal:                ║\n║    kubectl get hpa -w                                     ║\n║    kubectl get pods -w                                    ║\n╚═══════════════════════════════════════════════════════════╝\n  ")}function p(){console.log("\n╔═══════════════════════════════════════════════════════════╗\n║                   Stress Test Complete                    ║\n╠═══════════════════════════════════════════════════════════╣\n║  Monitor scale-down behavior with:                        ║\n║    kubectl get hpa -w                                     ║\n║                                                           ║\n║  Scale-down may take 5+ minutes (stabilization window)    ║\n╚═══════════════════════════════════════════════════════════╝\n  ")}var c=exports;for(var g in t)c[g]=t[g];t.__esModule&&Object.defineProperty(c,"__esModule",{value:!0})})();