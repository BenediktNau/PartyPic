# =============================================================================
# PARTY-PIC CLIENT - HELM VALUES
#
# Konfiguration fuer das React Frontend (Nginx).
# Das Ingress routet sowohl Frontend als auch API-Calls.
# =============================================================================

# Anzahl der Pod-Replikate
replicaCount: 2
# Container Image Konfiguration
image:
  repository: ghcr.io/benediktnau/partypic-client
  pullPolicy: Always
  tag: "sha-da3eda77f0f75a623eee8bd8b0b225ffa524c8ee"
# Resource Limits (wichtig fuer HPA)
resources:
  requests:
    cpu: "50m"
    memory: "64Mi"
  limits:
    cpu: "200m"
    memory: "256Mi"
# Horizontal Pod Autoscaler
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80
# App-Konfiguration
nodeEnv: "production"
port: "80"
s3ForcePathStyle: "false"
apiadresse: "http://api.ip.nip.io" # Wird vom Frontend verwendet
# Service-Konfiguration
service:
  type: ClusterIP
  port: 80
  targetPort: 80
# Ingress-Konfiguration (routet Frontend + API)
ingress:
  enabled: true
  className: "nginx"
  annotations: {}
  hosts:
    - host: app.52.7.172.243.nip.io
      paths:
        # 1. Frontend-Routen (alles was nicht API ist)
        - path: /
          pathType: Prefix
          serviceName: party-pic-client
          servicePort: 80
        # 2. API-Routen -> werden zum Backend weitergeleitet
        - path: /auth
          pathType: Prefix
          serviceName: party-pic-server
          servicePort: 3000
        - path: /sessions
          pathType: Prefix
          serviceName: party-pic-server
          servicePort: 3000
        - path: /users
          pathType: Prefix
          serviceName: party-pic-server
          servicePort: 3000
        - path: /pictures
          pathType: Prefix
          serviceName: party-pic-server
          servicePort: 3000
        - path: /metrics
          pathType: Prefix
          serviceName: party-pic-server
          servicePort: 3000
